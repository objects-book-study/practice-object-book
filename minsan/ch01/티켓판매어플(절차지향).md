# í‹°ì¼“ íŒë§¤ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬í˜„í•˜ê¸°

ì•„ë˜ì˜ ìš”êµ¬ì‚¬í•­ì„ ë”°ë¥´ëŠ” í‹°ì¼“ íŒë§¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬í˜„í•´ë³¸ë‹¤.

```
- ì†Œê·¹ì¥ì—ì„œëŠ” ì´ˆëŒ€ì¥(= ë¬´ë£Œ í‹°ì¼“ ì´ìš©ê¶Œ) ì´ë²¤íŠ¸ë¥¼ ì§„í–‰í•œë‹¤.
- ê´€ê°ì´ ì†Œê·¹ì¥ì— ì…ì¥í•  ë•Œ ì´ˆëŒ€ì¥ ìœ ë¬´ë¥¼ í™•ì¸í•´ì•¼ í•œë‹¤.
    - ì´ˆëŒ€ì¥ì´ ìˆëŠ” ê²½ìš°ì—ëŠ” ë¬´ë£Œë¡œ ì…ì¥í•œë‹¤.
    - ì´ˆëŒ€ì¥ì´ ì—†ëŠ” ê²½ìš°ì—ëŠ” í‹°ì¼“ì„ êµ¬ë§¤í•´ì•¼ ì…ì¥í•  ìˆ˜ ìˆë‹¤.
```

## 1. ì ˆì°¨ì§€í–¥ìœ¼ë¡œ ì„¤ê³„ëœ ì½”ë“œ ì§œë³´ê¸°

### ê°ì²´ êµ¬í˜„ (Data)

#### Invitation

```java
public class Invitation {
    private LocalDateTime when;
}
```

> ê³µì—°ì„ ê´€ëŒí•  ìˆ˜ ìˆëŠ” ì´ˆëŒ€ì¼ì(when)ë¥¼ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ í¬í•¨í•˜ëŠ” ê°„ë‹¨í•œ í´ë˜ìŠ¤ë¡œ êµ¬í˜„ëœë‹¤.

#### Ticket

```java
public class Ticket {
    private Long fee;

    public Long getFee() {
        return fee;
    }
}
```

> ê³µì—°ì„ ê´€ëŒí•  ë•Œ í•„ìš”í•œ í‹°ì¼“ ê°ì²´ì´ë‹¤.

#### Bag

ì´ë²¤íŠ¸ ë‹¹ì²¨ìëŠ” í‹°ì¼“ìœ¼ë¡œ êµí™˜í•  ì´ˆëŒ€ì¥ì„ ê°–ê³  ìˆì„ ê²ƒì´ë‹¤.  
ì´ë²¤íŠ¸ì— ë‹¹ì²¨ë˜ì§€ ì•Šì€ ê´€ëŒê°ì€ í‹°ì¼“ì„ êµ¬ë§¤í•  ìˆ˜ ìˆëŠ” í˜„ê¸ˆì„ ë³´ìœ í•˜ê³  ìˆì„ ê²ƒì´ë‹¤.  
ğŸ‘‰ğŸ» ë”°ë¼ì„œ ê´€ëŒê°ì´ ê°–ê³  ì˜¬ ìˆ˜ ìˆëŠ” ì†Œì§€í’ˆì€ `ì´ˆëŒ€ì¥`, `í˜„ê¸ˆ`, `í‹°ì¼“` ì„¸ ê°€ì§€ë¿ì´ë‹¤.

```java
public class Bag {
    private Long amount;
    private Invitation invitation;
    private Ticket ticket;

    // í•„ë“œ ê°’ì„ ì œí•œí•˜ê¸° ìœ„í•´ ìƒì„±ìë¥¼ ë¶„ë¥˜í•œë‹¤.
    public Bag(long amount) {
        this(null, amount);
    }

    public Bag(Invitation invitation, long amount) {
        this.invitation = invitation;
        this.amount = amount;
    }

    public boolean hasInvitation() {
        return invitation != null;
    }

    public boolean hasTicket() {
        return ticket != null;
    }

    public void setTicket(Ticket ticket) {
        this.thicket = ticket;
    }

    public void minusAmount(Long amount) {
        this.amount -= amount;
    }

    public void plusAmount(Long amount) {
        this.amount += amount;
    }
}
```

> ê´€ëŒê°ì˜ ì´ˆëŒ€ì¥ ë³´ìœ  ì—¬ë¶€ì— ë”°ë¼ì„œ `ì´ˆëŒ€ì¥ & í˜„ê¸ˆ`ì„ í•¨ê»˜ ê°–ëŠ” ê²½ìš°ì™€ `í˜„ê¸ˆ`ë§Œ ë³´ìœ í•˜ëŠ” ê²½ìš°ê°€ ì¡´ì¬í•œë‹¤.  
> ğŸ‘‰ğŸ» ì´ë¥¼ ìƒì„±ìë¥¼ í†µí•´ **ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œì ì—ì„œ ì œí•œ**í•œë‹¤.

#### Audience

```java
public class Audience {
    private Bag bag;

    public Audience(Bag bag) {
        this.bag = bag;
    }

    public Bag getBag() {
        return this.bag;
    }
}
```

> ê´€ëŒê°ì€ ì†Œì§€í’ˆì„ ë³´ê´€í•˜ê¸° ìœ„í•´ ê°€ë°©ì„ ì†Œì§€í•  ìˆ˜ ìˆë‹¤.

#### TicketOffice

```java
public class TicketOffice {
    private Long amount;
    private List<Ticket> tickets = new ArrayList<>();

    public TicketOffice(Long amount, Ticket ... tickets) {
        this.amount = amount;
        this.tickets.addAll(Arrays.asList(tickets));
    }

    public Ticket getTicket() {
        return tickets.remove(0);
    }

    public void minusAmount(Long amount) {
        this.amount -= amount;
    }

    public void plusAmount(Long amount) {
        this.amount += amount;
    }
}
```

> ë§¤í‘œì†Œì—ëŠ” ê´€ëŒê°ì—ê²Œ íŒë§¤í•  `í‹°ì¼“`ê³¼ `íŒë§¤ ê¸ˆì•¡`ì´ ë³´ê´€ë¼ì•¼ í•œë‹¤.

#### TicketSeller

```java
public class TicketSeller {
    private TicketOffice ticketOffice;

    public TicketSeller(TicketOffice ticketOffice) {
        this.ticketOffice = ticketOffice;
    }

    public TicketOffice getTicketOffice() {
        return ticketOffice;
    }
}
```

> íŒë§¤ì›ì€ í‹°ì¼“ì„ êµí™˜ ë° íŒë§¤í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•˜ë©°, ì´ ê³¼ì •ì—ì„œ ìì‹ ì´ ì¼í•˜ëŠ” ë§¤í‘œì†Œ(`TicketOffice`)ë¥¼ ì•Œê³  ìˆì–´ì•¼ í•œë‹¤.

### ì‹¤í–‰ ê°ì²´ êµ¬í˜„ (Process)

```java
public class Theater {
    private TicketSeller ticketSeller;

    public Theater(TicketSeller ticketSeller) {
        this.ticketSeller = ticketSeller;
    }

    public void enter(Audience audience) {
        if (audience.getBag().hasInvitation()) {
            Ticket ticket = ticketSeller.getTicketOffice().getTicket();
            audience.getBag().setTicket(ticket);
        } else {
            Ticket ticket = ticketSeller.getTicketOffice().getTicket();
            audience.getBag().minusAmount(ticket.getFee());
            ticketSeller.getTicketOffice().plusAmount(ticket.getFee());
            audience.getBag().setTicket(ticket);
        }
    }
}
```

> ì†Œê·¹ì¥ì—ì„œ ì…ì¥ì„ ê´€ë¦¬í•˜ë„ë¡ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ê³  `enter` ë©”ì†Œë“œë¥¼ êµ¬í˜„í–ˆë‹¤.
